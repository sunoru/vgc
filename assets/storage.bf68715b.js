var Pe=Object.defineProperty,Ie=Object.defineProperties;var je=Object.getOwnPropertyDescriptors;var he=Object.getOwnPropertySymbols;var Te=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var be=(e,t,o)=>t in e?Pe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,I=(e,t)=>{for(var o in t||(t={}))Te.call(t,o)&&be(e,o,t[o]);if(he)for(var o of he(t))ze.call(t,o)&&be(e,o,t[o]);return e},Z=(e,t)=>Ie(e,je(t));import{f as De,w as D,d as re,a9 as Fe,g as J,a6 as Ne,c as ve,a5 as Le,a as k,h as x,aa as Ue,r as z,ab as Ze,ac as Ke,ad as He,s as ie,n as H,ae as Ve,af as Ae,o as me,i as Qe,A as Y,b as X,V as ye,ag as Je,ah as We,ai as Ge,B as pe,G as Xe}from"./index.fca2a0f3.js";import{b as Ye,u as et,a as tt,c as ot,e as nt}from"./format.e8610ab1.js";function at({validate:e,resetValidation:t,requiresQForm:o}){const r=De(Fe,!1);if(r!==!1){const{props:i,proxy:m}=J();Object.assign(m,{validate:e,resetValidation:t}),D(()=>i.disable,s=>{s===!0?(typeof t=="function"&&t(),r.unbindComponent(m)):r.bindComponent(m)}),i.disable!==!0&&r.bindComponent(m),re(()=>{i.disable!==!0&&r.unbindComponent(m)})}else o===!0&&console.error("Parent QForm not found on useFormChild()!")}const ke=/^#[0-9a-fA-F]{3}([0-9a-fA-F]{3})?$/,xe=/^#[0-9a-fA-F]{4}([0-9a-fA-F]{4})?$/,Ce=/^#([0-9a-fA-F]{3}|[0-9a-fA-F]{4}|[0-9a-fA-F]{6}|[0-9a-fA-F]{8})$/,ee=/^rgb\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5])\)$/,te=/^rgba\(((0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),){2}(0|[1-9][\d]?|1[\d]{0,2}|2[\d]?|2[0-4][\d]|25[0-5]),(0|0\.[0-9]+[1-9]|0\.[1-9]+|1)\)$/,we={date:e=>/^-?[\d]+\/[0-1]\d\/[0-3]\d$/.test(e),time:e=>/^([0-1]?\d|2[0-3]):[0-5]\d$/.test(e),fulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d:[0-5]\d$/.test(e),timeOrFulltime:e=>/^([0-1]?\d|2[0-3]):[0-5]\d(:[0-5]\d)?$/.test(e),email:e=>/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e),hexColor:e=>ke.test(e),hexaColor:e=>xe.test(e),hexOrHexaColor:e=>Ce.test(e),rgbColor:e=>ee.test(e),rgbaColor:e=>te.test(e),rgbOrRgbaColor:e=>ee.test(e)||te.test(e),hexOrRgbColor:e=>ke.test(e)||ee.test(e),hexaOrRgbaColor:e=>xe.test(e)||te.test(e),anyColor:e=>Ce.test(e)||ee.test(e)||te.test(e)},rt={};"Boolean Number String Function Array Date RegExp Object".split(" ").forEach(e=>{rt["[object "+e+"]"]=e.toLowerCase()});const lt=Z(I({},Ne),{min:{type:Number,default:0},max:{type:Number,default:100},color:String,centerColor:String,trackColor:String,fontSize:String,thickness:{type:Number,default:.2,validator:e=>e>=0&&e<=1},angle:{type:Number,default:0},showValue:Boolean,reverse:Boolean,instantFeedback:Boolean}),se=50,Be=2*se,_e=Be*Math.PI,ut=Math.round(_e*1e3)/1e3;ve({name:"QCircularProgress",props:Z(I({},lt),{value:{type:Number,default:0},animationSpeed:{type:[String,Number],default:600},indeterminate:Boolean}),setup(e,{slots:t}){const{proxy:{$q:o}}=J(),r=Le(e),i=k(()=>{const F=(o.lang.rtl===!0?-1:1)*e.angle;return{transform:e.reverse!==(o.lang.rtl===!0)?`scale3d(-1, 1, 1) rotate3d(0, 0, 1, ${-90-F}deg)`:`rotate3d(0, 0, 1, ${F-90}deg)`}}),m=k(()=>e.instantFeedback!==!0&&e.indeterminate!==!0?{transition:`stroke-dashoffset ${e.animationSpeed}ms ease 0s, stroke ${e.animationSpeed}ms ease`}:""),s=k(()=>Be/(1-e.thickness/2)),M=k(()=>`${s.value/2} ${s.value/2} ${s.value} ${s.value}`),y=k(()=>Ye(e.value,e.min,e.max)),p=k(()=>_e*(1-(y.value-e.min)/(e.max-e.min))),E=k(()=>e.thickness/2*s.value);function R({thickness:F,offset:g,color:C,cls:T}){return x("circle",{class:"q-circular-progress__"+T+(C!==void 0?` text-${C}`:""),style:m.value,fill:"transparent",stroke:"currentColor","stroke-width":F,"stroke-dasharray":ut,"stroke-dashoffset":g,cx:s.value,cy:s.value,r:se})}return()=>{const F=[];e.centerColor!==void 0&&e.centerColor!=="transparent"&&F.push(x("circle",{class:`q-circular-progress__center text-${e.centerColor}`,fill:"currentColor",r:se-E.value/2,cx:s.value,cy:s.value})),e.trackColor!==void 0&&e.trackColor!=="transparent"&&F.push(R({cls:"track",thickness:E.value,offset:0,color:e.trackColor})),F.push(R({cls:"circle",thickness:E.value,offset:p.value,color:e.color}));const g=[x("svg",{class:"q-circular-progress__svg",style:i.value,viewBox:M.value,"aria-hidden":"true"},F)];return e.showValue===!0&&g.push(x("div",{class:"q-circular-progress__text absolute-full row flex-center content-center",style:{fontSize:e.fontSize}},t.default!==void 0?t.default():[x("div",y.value)])),x("div",{class:`q-circular-progress q-circular-progress--${e.indeterminate===!0?"in":""}determinate`,style:r.value,role:"progressbar","aria-valuemin":e.min,"aria-valuemax":e.max,"aria-valuenow":e.indeterminate===!0?void 0:y.value},Ue(t.internal,g))}}});const it=["rejected"],st=[...it,"start","finish","added","removed"],ct=()=>!0;function dt(e){const t={};return e.forEach(o=>{t[o]=ct}),t}dt(st);let ue,oe=0;const j=new Array(256);for(let e=0;e<256;e++)j[e]=(e+256).toString(16).substring(1);const ft=(()=>{const e=typeof crypto!="undefined"?crypto:typeof window!="undefined"?window.crypto||window.msCrypto:void 0;if(e!==void 0){if(e.randomBytes!==void 0)return e.randomBytes;if(e.getRandomValues!==void 0)return t=>{const o=new Uint8Array(t);return e.getRandomValues(o),o}}return t=>{const o=[];for(let r=t;r>0;r--)o.push(Math.floor(Math.random()*256));return o}})(),Se=4096;function vt(){(ue===void 0||oe+16>Se)&&(oe=0,ue=ft(Se));const e=Array.prototype.slice.call(ue,oe,oe+=16);return e[6]=e[6]&15|64,e[8]=e[8]&63|128,j[e[0]]+j[e[1]]+j[e[2]]+j[e[3]]+"-"+j[e[4]]+j[e[5]]+"-"+j[e[6]]+j[e[7]]+"-"+j[e[8]]+j[e[9]]+"-"+j[e[10]]+j[e[11]]+j[e[12]]+j[e[13]]+j[e[14]]+j[e[15]]}const mt=[!0,!1,"ondemand"],gt={modelValue:{},error:{type:Boolean,default:null},errorMessage:String,noErrorIcon:Boolean,rules:Array,reactiveRules:Boolean,lazyRules:{type:[Boolean,String],validator:e=>mt.includes(e)}};function ht(e,t){const{props:o,proxy:r}=J(),i=z(!1),m=z(null),s=z(null);at({validate:C,resetValidation:g});let M=0,y;const p=k(()=>o.rules!==void 0&&o.rules!==null&&o.rules.length>0),E=k(()=>o.disable!==!0&&p.value===!0),R=k(()=>o.error===!0||i.value===!0),F=k(()=>typeof o.errorMessage=="string"&&o.errorMessage.length>0?o.errorMessage:m.value);D(()=>o.modelValue,()=>{T()}),D(()=>o.reactiveRules,O=>{O===!0?y===void 0&&(y=D(()=>o.rules,()=>{T(!0)})):y!==void 0&&(y(),y=void 0)},{immediate:!0}),D(e,O=>{O===!0?s.value===null&&(s.value=!1):s.value===!1&&(s.value=!0,E.value===!0&&o.lazyRules!=="ondemand"&&t.value===!1&&B())});function g(){M++,t.value=!1,s.value=null,i.value=!1,m.value=null,B.cancel()}function C(O=o.modelValue){if(E.value!==!0)return!0;const $=++M;t.value!==!0&&o.lazyRules!==!0&&(s.value=!0);const w=(S,n)=>{i.value!==S&&(i.value=S);const l=n||void 0;m.value!==l&&(m.value=l),t.value=!1},_=[];for(let S=0;S<o.rules.length;S++){const n=o.rules[S];let l;if(typeof n=="function"?l=n(O):typeof n=="string"&&we[n]!==void 0&&(l=we[n](O)),l===!1||typeof l=="string")return w(!0,l),!1;l!==!0&&l!==void 0&&_.push(l)}return _.length===0?(w(!1),!0):(t.value=!0,Promise.all(_).then(S=>{if(S===void 0||Array.isArray(S)===!1||S.length===0)return $===M&&w(!1),!0;const n=S.find(l=>l===!1||typeof l=="string");return $===M&&w(n!==void 0,n),n===void 0},S=>($===M&&(console.error(S),w(!0)),!1)))}function T(O){E.value===!0&&o.lazyRules!=="ondemand"&&(s.value===!0||o.lazyRules!==!0&&O!==!0)&&B()}const B=Ze(C,0);return re(()=>{y!==void 0&&y(),B.cancel()}),Object.assign(r,{resetValidation:g,validate:C}),Ke(r,"hasError",()=>R.value),{isDirtyModel:s,hasRules:p,hasError:R,errorMessage:F,validate:C,resetValidation:g}}const Me=/^on[A-Z]/;function bt(e,t){const o={listeners:z({}),attributes:z({})};function r(){const i={},m={};for(const s in e)s!=="class"&&s!=="style"&&Me.test(s)===!1&&(i[s]=e[s]);for(const s in t.props)Me.test(s)===!0&&(m[s]=t.props[s]);o.attributes.value=i,o.listeners.value=m}return He(r),r(),o}let ce=[],yt=[];function ge(e){yt.length===0?e():ce.push(e)}function pt(e){ce=ce.filter(t=>t!==e)}function de(e){return e===void 0?`f_${vt()}`:e}function fe(e){return e!=null&&(""+e).length>0}const kt=Z(I(I({},et),gt),{label:String,stackLabel:Boolean,hint:String,hideHint:Boolean,prefix:String,suffix:String,labelColor:String,color:String,bgColor:String,filled:Boolean,outlined:Boolean,borderless:Boolean,standout:[Boolean,String],square:Boolean,loading:Boolean,labelSlot:Boolean,bottomSlots:Boolean,hideBottomSpace:Boolean,rounded:Boolean,dense:Boolean,itemAligned:Boolean,counter:Boolean,clearable:Boolean,clearIcon:String,disable:Boolean,readonly:Boolean,autofocus:Boolean,for:String,maxlength:[Number,String]}),xt=["update:modelValue","clear","focus","blur","popup-show","popup-hide"];function Ct(){const{props:e,attrs:t,proxy:o,vnode:r}=J();return{isDark:tt(e,o.$q),editable:k(()=>e.disable!==!0&&e.readonly!==!0),innerLoading:z(!1),focused:z(!1),hasPopupOpen:!1,splitAttrs:bt(t,r),targetUid:z(de(e.for)),rootRef:z(null),targetRef:z(null),controlRef:z(null)}}function wt(e){const{props:t,emit:o,slots:r,attrs:i,proxy:m}=J(),{$q:s}=m;let M;e.hasValue===void 0&&(e.hasValue=k(()=>fe(t.modelValue))),e.emitValue===void 0&&(e.emitValue=a=>{o("update:modelValue",a)}),e.controlEvents===void 0&&(e.controlEvents={onFocusin:d,onFocusout:f}),Object.assign(e,{clearValue:c,onControlFocusin:d,onControlFocusout:f,focus:l}),e.computedCounter===void 0&&(e.computedCounter=k(()=>{if(t.counter!==!1){const a=typeof t.modelValue=="string"||typeof t.modelValue=="number"?(""+t.modelValue).length:Array.isArray(t.modelValue)===!0?t.modelValue.length:0,h=t.maxlength!==void 0?t.maxlength:t.maxValues;return a+(h!==void 0?" / "+h:"")}}));const{isDirtyModel:y,hasRules:p,hasError:E,errorMessage:R,resetValidation:F}=ht(e.focused,e.innerLoading),g=e.floatingLabel!==void 0?k(()=>t.stackLabel===!0||e.focused.value===!0||e.floatingLabel.value===!0):k(()=>t.stackLabel===!0||e.focused.value===!0||e.hasValue.value===!0),C=k(()=>t.bottomSlots===!0||t.hint!==void 0||p.value===!0||t.counter===!0||t.error!==null),T=k(()=>t.filled===!0?"filled":t.outlined===!0?"outlined":t.borderless===!0?"borderless":t.standout?"standout":"standard"),B=k(()=>`q-field row no-wrap items-start q-field--${T.value}`+(e.fieldClass!==void 0?` ${e.fieldClass.value}`:"")+(t.rounded===!0?" q-field--rounded":"")+(t.square===!0?" q-field--square":"")+(g.value===!0?" q-field--float":"")+($.value===!0?" q-field--labeled":"")+(t.dense===!0?" q-field--dense":"")+(t.itemAligned===!0?" q-field--item-aligned q-item-type":"")+(e.isDark.value===!0?" q-field--dark":"")+(e.getControl===void 0?" q-field--auto-height":"")+(e.focused.value===!0?" q-field--focused":"")+(E.value===!0?" q-field--error":"")+(E.value===!0||e.focused.value===!0?" q-field--highlighted":"")+(t.hideBottomSpace!==!0&&C.value===!0?" q-field--with-bottom":"")+(t.disable===!0?" q-field--disabled":t.readonly===!0?" q-field--readonly":"")),O=k(()=>"q-field__control relative-position row no-wrap"+(t.bgColor!==void 0?` bg-${t.bgColor}`:"")+(E.value===!0?" text-negative":typeof t.standout=="string"&&t.standout.length>0&&e.focused.value===!0?` ${t.standout}`:t.color!==void 0?` text-${t.color}`:"")),$=k(()=>t.labelSlot===!0||t.label!==void 0),w=k(()=>"q-field__label no-pointer-events absolute ellipsis"+(t.labelColor!==void 0&&E.value!==!0?` text-${t.labelColor}`:"")),_=k(()=>({id:e.targetUid.value,editable:e.editable.value,focused:e.focused.value,floatingLabel:g.value,modelValue:t.modelValue,emitValue:e.emitValue})),S=k(()=>{const a={for:e.targetUid.value};return t.disable===!0?a["aria-disabled"]="true":t.readonly===!0&&(a["aria-readonly"]="true"),a});D(()=>t.for,a=>{e.targetUid.value=de(a)});function n(){const a=document.activeElement;let h=e.targetRef!==void 0&&e.targetRef.value;h&&(a===null||a.id!==e.targetUid.value)&&(h.hasAttribute("tabindex")===!0||(h=h.querySelector("[tabindex]")),h&&h!==a&&h.focus({preventScroll:!0}))}function l(){ge(n)}function v(){pt(n);const a=document.activeElement;a!==null&&e.rootRef.value.contains(a)&&a.blur()}function d(a){clearTimeout(M),e.editable.value===!0&&e.focused.value===!1&&(e.focused.value=!0,o("focus",a))}function f(a,h){clearTimeout(M),M=setTimeout(()=>{document.hasFocus()===!0&&(e.hasPopupOpen===!0||e.controlRef===void 0||e.controlRef.value===null||e.controlRef.value.contains(document.activeElement)!==!1)||(e.focused.value===!0&&(e.focused.value=!1,o("blur",a)),h!==void 0&&h())})}function c(a){ie(a),s.platform.is.mobile!==!0?(e.targetRef!==void 0&&e.targetRef.value||e.rootRef.value).focus():e.rootRef.value.contains(document.activeElement)===!0&&document.activeElement.blur(),t.type==="file"&&(e.inputRef.value.value=null),o("update:modelValue",null),o("clear",t.modelValue),H(()=>{F(),s.platform.is.mobile!==!0&&(y.value=!1)})}function q(){const a=[];return r.prepend!==void 0&&a.push(x("div",{class:"q-field__prepend q-field__marginal row no-wrap items-center",key:"prepend",onClick:Y},r.prepend())),a.push(x("div",{class:"q-field__control-container col relative-position row no-wrap q-anchor--skip"},b())),E.value===!0&&t.noErrorIcon===!1&&a.push(N("error",[x(ye,{name:s.iconSet.field.error,color:"negative"})])),t.loading===!0||e.innerLoading.value===!0?a.push(N("inner-loading-append",r.loading!==void 0?r.loading():[x(Je,{color:t.color})])):t.clearable===!0&&e.hasValue.value===!0&&e.editable.value===!0&&a.push(N("inner-clearable-append",[x(ye,{class:"q-field__focusable-action",tag:"button",name:t.clearIcon||s.iconSet.field.clear,tabindex:0,type:"button","aria-hidden":null,role:null,onClick:c})])),r.append!==void 0&&a.push(x("div",{class:"q-field__append q-field__marginal row no-wrap items-center",key:"append",onClick:Y},r.append())),e.getInnerAppend!==void 0&&a.push(N("inner-append",e.getInnerAppend())),e.getControlChild!==void 0&&a.push(e.getControlChild()),a}function b(){const a=[];return t.prefix!==void 0&&t.prefix!==null&&a.push(x("div",{class:"q-field__prefix no-pointer-events row items-center"},t.prefix)),e.getShadowControl!==void 0&&e.hasShadow.value===!0&&a.push(e.getShadowControl()),e.getControl!==void 0?a.push(e.getControl()):r.rawControl!==void 0?a.push(r.rawControl()):r.control!==void 0&&a.push(x("div",Z(I({ref:e.targetRef,class:"q-field__native row"},e.splitAttrs.attributes.value),{"data-autofocus":t.autofocus===!0||void 0}),r.control(_.value))),$.value===!0&&a.push(x("div",{class:w.value},X(r.label,t.label))),t.suffix!==void 0&&t.suffix!==null&&a.push(x("div",{class:"q-field__suffix no-pointer-events row items-center"},t.suffix)),a.concat(X(r.default))}function V(){let a,h;E.value===!0?R.value!==null?(a=[x("div",{role:"alert"},R.value)],h=`q--slot-error-${R.value}`):(a=X(r.error),h="q--slot-error"):(t.hideHint!==!0||e.focused.value===!0)&&(t.hint!==void 0?(a=[x("div",t.hint)],h=`q--slot-hint-${t.hint}`):(a=X(r.hint),h="q--slot-hint"));const u=t.counter===!0||r.counter!==void 0;if(t.hideBottomSpace===!0&&u===!1&&a===void 0)return;const A=x("div",{key:h,class:"q-field__messages col"},a);return x("div",{class:"q-field__bottom row items-start q-field__bottom--"+(t.hideBottomSpace!==!0?"animated":"stale")},[t.hideBottomSpace===!0?A:x(We,{name:"q-transition--field-message"},()=>A),u===!0?x("div",{class:"q-field__counter"},r.counter!==void 0?r.counter():e.computedCounter.value):null])}function N(a,h){return h===null?null:x("div",{key:a,class:"q-field__append q-field__marginal row no-wrap items-center q-anchor--skip"},h)}Object.assign(m,{focus:l,blur:v});let U=!1;return Ve(()=>{U=!0}),Ae(()=>{U===!0&&t.autofocus===!0&&m.focus()}),me(()=>{Qe.value===!0&&t.for===void 0&&(e.targetUid.value=de()),t.autofocus===!0&&m.focus()}),re(()=>{clearTimeout(M)}),function(){const h=e.getControl===void 0&&r.control===void 0?I(Z(I({},e.splitAttrs.attributes.value),{"data-autofocus":t.autofocus}),S.value):S.value;return x("label",I({ref:e.rootRef,class:[B.value,i.class],style:i.style},h),[r.before!==void 0?x("div",{class:"q-field__before q-field__marginal row no-wrap items-center",onClick:Y},r.before()):null,x("div",{class:"q-field__inner relative-position col self-stretch"},[x("div",I({ref:e.controlRef,class:O.value,tabindex:-1},e.controlEvents),q()),C.value===!0?V():null]),r.after!==void 0?x("div",{class:"q-field__after q-field__marginal row no-wrap items-center",onClick:Y},r.after()):null])}}const qe={date:"####/##/##",datetime:"####/##/## ##:##",time:"##:##",fulltime:"##:##:##",phone:"(###) ### - ####",card:"#### #### #### ####"},ae={"#":{pattern:"[\\d]",negate:"[^\\d]"},S:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]"},N:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]"},A:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleUpperCase()},a:{pattern:"[a-zA-Z]",negate:"[^a-zA-Z]",transform:e=>e.toLocaleLowerCase()},X:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleUpperCase()},x:{pattern:"[0-9a-zA-Z]",negate:"[^0-9a-zA-Z]",transform:e=>e.toLocaleLowerCase()}},Ee=Object.keys(ae);Ee.forEach(e=>{ae[e].regex=new RegExp(ae[e].pattern)});const St=new RegExp("\\\\([^.*+?^${}()|([\\]])|([.*+?^${}()|[\\]])|(["+Ee.join("")+"])|(.)","g"),Re=/[.*+?^${}()|[\]\\]/g,P=String.fromCharCode(1),Mt={mask:String,reverseFillMask:Boolean,fillMask:[Boolean,String],unmaskedValue:Boolean};function qt(e,t,o,r){let i,m,s,M;const y=z(null),p=z(R());function E(){return e.autogrow===!0||["textarea","text","search","url","tel","password"].includes(e.type)}D(()=>e.type+e.autogrow,g),D(()=>e.mask,n=>{if(n!==void 0)C(p.value,!0);else{const l=_(p.value);g(),e.modelValue!==l&&t("update:modelValue",l)}}),D(()=>e.fillMask+e.reverseFillMask,()=>{y.value===!0&&C(p.value,!0)}),D(()=>e.unmaskedValue,()=>{y.value===!0&&C(p.value)});function R(){if(g(),y.value===!0){const n=$(_(e.modelValue));return e.fillMask!==!1?S(n):n}return e.modelValue}function F(n){if(n<i.length)return i.slice(-n);let l="",v=i;const d=v.indexOf(P);if(d>-1){for(let f=n-v.length;f>0;f--)l+=P;v=v.slice(0,d)+l+v.slice(d)}return v}function g(){if(y.value=e.mask!==void 0&&e.mask.length>0&&E(),y.value===!1){M=void 0,i="",m="";return}const n=qe[e.mask]===void 0?e.mask:qe[e.mask],l=typeof e.fillMask=="string"&&e.fillMask.length>0?e.fillMask.slice(0,1):"_",v=l.replace(Re,"\\$&"),d=[],f=[],c=[];let q=e.reverseFillMask===!0,b="",V="";n.replace(St,(h,u,A,Q,K)=>{if(Q!==void 0){const L=ae[Q];c.push(L),V=L.negate,q===!0&&(f.push("(?:"+V+"+)?("+L.pattern+"+)?(?:"+V+"+)?("+L.pattern+"+)?"),q=!1),f.push("(?:"+V+"+)?("+L.pattern+")?")}else if(A!==void 0)b="\\"+(A==="\\"?"":A),c.push(A),d.push("([^"+b+"]+)?"+b+"?");else{const L=u!==void 0?u:K;b=L==="\\"?"\\\\\\\\":L.replace(Re,"\\\\$&"),c.push(L),d.push("([^"+b+"]+)?"+b+"?")}});const N=new RegExp("^"+d.join("")+"("+(b===""?".":"[^"+b+"]")+"+)?$"),U=f.length-1,a=f.map((h,u)=>u===0&&e.reverseFillMask===!0?new RegExp("^"+v+"*"+h):u===U?new RegExp("^"+h+"("+(V===""?".":V)+"+)?"+(e.reverseFillMask===!0?"$":v+"*")):new RegExp("^"+h));s=c,M=h=>{const u=N.exec(h);u!==null&&(h=u.slice(1).join(""));const A=[],Q=a.length;for(let K=0,L=h;K<Q;K++){const le=a[K].exec(L);if(le===null)break;L=L.slice(le.shift().length),A.push(...le)}return A.length>0?A.join(""):h},i=c.map(h=>typeof h=="string"?h:P).join(""),m=i.split(P).join(l)}function C(n,l,v){const d=r.value,f=d.selectionEnd,c=d.value.length-f,q=_(n);l===!0&&g();const b=$(q),V=e.fillMask!==!1?S(b):b,N=p.value!==V;d.value!==V&&(d.value=V),N===!0&&(p.value=V),document.activeElement===d&&H(()=>{if(V===m){const a=e.reverseFillMask===!0?m.length:0;d.setSelectionRange(a,a,"forward");return}if(v==="insertFromPaste"&&e.reverseFillMask!==!0){const a=f-1;B.right(d,a,a);return}if(["deleteContentBackward","deleteContentForward"].indexOf(v)>-1){const a=e.reverseFillMask===!0?f===0?V.length>b.length?1:0:Math.max(0,V.length-(V===m?0:Math.min(b.length,c)+1))+1:f;d.setSelectionRange(a,a,"forward");return}if(e.reverseFillMask===!0)if(N===!0){const a=Math.max(0,V.length-(V===m?0:Math.min(b.length,c+1)));a===1&&f===1?d.setSelectionRange(a,a,"forward"):B.rightReverse(d,a,a)}else{const a=V.length-c;d.setSelectionRange(a,a,"backward")}else if(N===!0){const a=Math.max(0,i.indexOf(P),Math.min(b.length,f)-1);B.right(d,a,a)}else{const a=f-1;B.right(d,a,a)}});const U=e.unmaskedValue===!0?_(V):V;String(e.modelValue)!==U&&o(U,!0)}function T(n,l,v){const d=$(_(n.value));l=Math.max(0,i.indexOf(P),Math.min(d.length,l)),n.setSelectionRange(l,v,"forward")}const B={left(n,l,v,d){const f=i.slice(l-1).indexOf(P)===-1;let c=Math.max(0,l-1);for(;c>=0;c--)if(i[c]===P){l=c,f===!0&&l++;break}if(c<0&&i[l]!==void 0&&i[l]!==P)return B.right(n,0,0);l>=0&&n.setSelectionRange(l,d===!0?v:l,"backward")},right(n,l,v,d){const f=n.value.length;let c=Math.min(f,v+1);for(;c<=f;c++)if(i[c]===P){v=c;break}else i[c-1]===P&&(v=c);if(c>f&&i[v-1]!==void 0&&i[v-1]!==P)return B.left(n,f,f);n.setSelectionRange(d?l:v,v,"forward")},leftReverse(n,l,v,d){const f=F(n.value.length);let c=Math.max(0,l-1);for(;c>=0;c--)if(f[c-1]===P){l=c;break}else if(f[c]===P&&(l=c,c===0))break;if(c<0&&f[l]!==void 0&&f[l]!==P)return B.rightReverse(n,0,0);l>=0&&n.setSelectionRange(l,d===!0?v:l,"backward")},rightReverse(n,l,v,d){const f=n.value.length,c=F(f),q=c.slice(0,v+1).indexOf(P)===-1;let b=Math.min(f,v+1);for(;b<=f;b++)if(c[b-1]===P){v=b,v>0&&q===!0&&v--;break}if(b>f&&c[v-1]!==void 0&&c[v-1]!==P)return B.leftReverse(n,f,f);n.setSelectionRange(d===!0?l:v,v,"forward")}};function O(n){if(Ge(n)===!0)return;const l=r.value,v=l.selectionStart,d=l.selectionEnd;if(n.keyCode===37||n.keyCode===39){const f=B[(n.keyCode===39?"right":"left")+(e.reverseFillMask===!0?"Reverse":"")];n.preventDefault(),f(l,v,d,n.shiftKey)}else n.keyCode===8&&e.reverseFillMask!==!0&&v===d?B.left(l,v,d,!0):n.keyCode===46&&e.reverseFillMask===!0&&v===d&&B.rightReverse(l,v,d,!0)}function $(n){if(n==null||n==="")return"";if(e.reverseFillMask===!0)return w(n);const l=s;let v=0,d="";for(let f=0;f<l.length;f++){const c=n[v],q=l[f];if(typeof q=="string")d+=q,c===q&&v++;else if(c!==void 0&&q.regex.test(c))d+=q.transform!==void 0?q.transform(c):c,v++;else return d}return d}function w(n){const l=s,v=i.indexOf(P);let d=n.length-1,f="";for(let c=l.length-1;c>=0&&d>-1;c--){const q=l[c];let b=n[d];if(typeof q=="string")f=q+f,b===q&&d--;else if(b!==void 0&&q.regex.test(b))do f=(q.transform!==void 0?q.transform(b):b)+f,d--,b=n[d];while(v===c&&b!==void 0&&q.regex.test(b));else return f}return f}function _(n){return typeof n!="string"||M===void 0?typeof n=="number"?M(""+n):n:M(n)}function S(n){return m.length-n.length<=0?n:e.reverseFillMask===!0&&n.length>0?m.slice(0,-n.length)+n:n+m.slice(n.length)}return{innerValue:p,hasMask:y,moveCursorForPaste:T,updateMaskValue:C,onMaskedKeydown:O}}function Rt(e,t){function o(){const r=e.modelValue;try{const i="DataTransfer"in window?new DataTransfer:"ClipboardEvent"in window?new ClipboardEvent("").clipboardData:void 0;return Object(r)===r&&("length"in r?Array.from(r):[r]).forEach(m=>{i.items.add(m)}),{files:i.files}}catch{return{files:void 0}}}return t===!0?k(()=>{if(e.type==="file")return o()}):k(o)}const Ft=/[\u3000-\u303f\u3040-\u309f\u30a0-\u30ff\uff00-\uff9f\u4e00-\u9faf\u3400-\u4dbf]/,Vt=/[\u4e00-\u9fff\u3400-\u4dbf\u{20000}-\u{2a6df}\u{2a700}-\u{2b73f}\u{2b740}-\u{2b81f}\u{2b820}-\u{2ceaf}\uf900-\ufaff\u3300-\u33ff\ufe30-\ufe4f\uf900-\ufaff\u{2f800}-\u{2fa1f}]/u,At=/[\u3131-\u314e\u314f-\u3163\uac00-\ud7a3]/;function Bt(e){return function(o){if(o.type==="compositionend"||o.type==="change"){if(o.target.composing!==!0)return;o.target.composing=!1,e(o)}else o.type==="compositionupdate"?typeof o.data=="string"&&Ft.test(o.data)===!1&&Vt.test(o.data)===!1&&At.test(o.data)===!1&&(o.target.composing=!1):o.target.composing=!0}}var jt=ve({name:"QInput",inheritAttrs:!1,props:Z(I(I(I({},kt),Mt),ot),{modelValue:{required:!1},shadowText:String,type:{type:String,default:"text"},debounce:[String,Number],autogrow:Boolean,inputClass:[Array,String,Object],inputStyle:[Array,String,Object]}),emits:[...xt,"paste","change"],setup(e,{emit:t,attrs:o}){const r={};let i=NaN,m,s,M,y;const p=z(null),E=nt(e),{innerValue:R,hasMask:F,moveCursorForPaste:g,updateMaskValue:C,onMaskedKeydown:T}=qt(e,t,q,p),B=Rt(e,!0),O=k(()=>fe(R.value)),$=Bt(c),w=Ct(),_=k(()=>e.type==="textarea"||e.autogrow===!0),S=k(()=>_.value===!0||["text","search","url","tel","password"].includes(e.type)),n=k(()=>{const u=Z(I({},w.splitAttrs.listeners.value),{onInput:c,onPaste:f,onChange:V,onBlur:N,onFocus:pe});return u.onCompositionstart=u.onCompositionupdate=u.onCompositionend=$,F.value===!0&&(u.onKeydown=T),e.autogrow===!0&&(u.onAnimationend=b),u}),l=k(()=>{const u=Z(I({tabindex:0,"data-autofocus":e.autofocus===!0||void 0,rows:e.type==="textarea"?6:void 0,"aria-label":e.label,name:E.value},w.splitAttrs.attributes.value),{id:w.targetUid.value,maxlength:e.maxlength,disabled:e.disable===!0,readonly:e.readonly===!0});return _.value===!1&&(u.type=e.type),e.autogrow===!0&&(u.rows=1),u});D(()=>e.type,()=>{p.value&&(p.value.value=e.modelValue)}),D(()=>e.modelValue,u=>{if(F.value===!0){if(s===!0&&(s=!1,String(u)===i))return;C(u)}else R.value!==u&&(R.value=u,e.type==="number"&&r.hasOwnProperty("value")===!0&&(m===!0?m=!1:delete r.value));e.autogrow===!0&&H(b)}),D(()=>e.autogrow,u=>{u===!0?H(b):p.value!==null&&o.rows>0&&(p.value.style.height="auto")}),D(()=>e.dense,()=>{e.autogrow===!0&&H(b)});function v(){ge(()=>{const u=document.activeElement;p.value!==null&&p.value!==u&&(u===null||u.id!==w.targetUid.value)&&p.value.focus({preventScroll:!0})})}function d(){p.value!==null&&p.value.select()}function f(u){if(F.value===!0&&e.reverseFillMask!==!0){const A=u.target;g(A,A.selectionStart,A.selectionEnd)}t("paste",u)}function c(u){if(!u||!u.target||u.target.composing===!0)return;if(e.type==="file"){t("update:modelValue",u.target.files);return}const A=u.target.value;if(F.value===!0)C(A,!1,u.inputType);else if(q(A),S.value===!0&&u.target===document.activeElement){const{selectionStart:Q,selectionEnd:K}=u.target;Q!==void 0&&K!==void 0&&H(()=>{u.target===document.activeElement&&A.indexOf(u.target.value)===0&&u.target.setSelectionRange(Q,K)})}e.autogrow===!0&&b()}function q(u,A){y=()=>{e.type!=="number"&&r.hasOwnProperty("value")===!0&&delete r.value,e.modelValue!==u&&i!==u&&(A===!0&&(s=!0),t("update:modelValue",u),H(()=>{i===u&&(i=NaN)})),y=void 0},e.type==="number"&&(m=!0,r.value=u),e.debounce!==void 0?(clearTimeout(M),r.value=u,M=setTimeout(y,e.debounce)):y()}function b(){const u=p.value;if(u!==null){const A=u.parentNode.style;A.marginBottom=u.scrollHeight-1+"px",u.style.height="1px",u.style.height=u.scrollHeight+"px",A.marginBottom=""}}function V(u){$(u),clearTimeout(M),y!==void 0&&y(),t("change",u.target.value)}function N(u){u!==void 0&&pe(u),clearTimeout(M),y!==void 0&&y(),m=!1,s=!1,delete r.value,e.type!=="file"&&setTimeout(()=>{p.value!==null&&(p.value.value=R.value!==void 0?R.value:"")})}function U(){return r.hasOwnProperty("value")===!0?r.value:R.value!==void 0?R.value:""}re(()=>{N()}),me(()=>{e.autogrow===!0&&b()}),Object.assign(w,{innerValue:R,fieldClass:k(()=>`q-${_.value===!0?"textarea":"input"}`+(e.autogrow===!0?" q-textarea--autogrow":"")),hasShadow:k(()=>e.type!=="file"&&typeof e.shadowText=="string"&&e.shadowText.length>0),inputRef:p,emitValue:q,hasValue:O,floatingLabel:k(()=>O.value===!0||fe(e.displayValue)),getControl:()=>x(_.value===!0?"textarea":"input",I(I(I({ref:p,class:["q-field__native q-placeholder",e.inputClass],style:e.inputStyle},l.value),n.value),e.type!=="file"?{value:U()}:B.value)),getShadowControl:()=>x("div",{class:"q-field__native q-field__shadow absolute-bottom no-pointer-events"+(_.value===!0?"":" text-no-wrap")},[x("span",{class:"invisible"},U()),x("span",e.shadowText)])});const a=wt(w),h=J();return Object.assign(h.proxy,{focus:v,select:d,getNativeElement:()=>p.value}),a}}),Tt=ve({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(e,{slots:t,emit:o}){const r=J(),i=z(null);let m=0;const s=[];function M(g){const C=[],T=typeof g=="boolean"?g:e.noErrorFocus!==!0,B=++m,O=($,w)=>{o("validation-"+($===!0?"success":"error"),w)};for(let $=0;$<s.length;$++){const w=s[$],_=w.validate();if(typeof _.then=="function")C.push(_.then(S=>({valid:S,comp:w}),S=>({valid:!1,comp:w,err:S})));else if(_!==!0){if(e.greedy===!1)return O(!1,w),T===!0&&typeof w.focus=="function"&&w.focus(),Promise.resolve(!1);C.push({valid:!1,comp:w})}}return C.length===0?(O(!0),Promise.resolve(!0)):Promise.all(C).then($=>{const w=$.filter(l=>l.valid!==!0);if(w.length===0)return B===m&&O(!0),!0;const{valid:_,comp:S,err:n}=w[0];return B===m&&(n!==void 0&&console.error(n),O(!1,S),T===!0&&_!==!0&&typeof S.focus=="function"&&S.focus()),!1})}function y(){m++,s.forEach(g=>{typeof g.resetValidation=="function"&&g.resetValidation()})}function p(g){g!==void 0&&ie(g);const C=m+1;M().then(T=>{C===m&&T===!0&&(e.onSubmit!==void 0?o("submit",g):g!==void 0&&g.target!==void 0&&typeof g.target.submit=="function"&&g.target.submit())})}function E(g){g!==void 0&&ie(g),o("reset"),H(()=>{y(),e.autofocus===!0&&e.noResetFocus!==!0&&R()})}function R(){ge(()=>{if(i.value===null)return;const g=i.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(i.value.querySelectorAll("[tabindex]"),C=>C.tabIndex>-1);g!=null&&g.focus({preventScroll:!0})})}Xe(Fe,{bindComponent(g){s.push(g)},unbindComponent(g){const C=s.indexOf(g);C>-1&&s.splice(C,1)}});let F=!1;return Ve(()=>{F=!0}),Ae(()=>{F===!0&&e.autofocus===!0&&R()}),me(()=>{e.autofocus===!0&&R()}),Object.assign(r.proxy,{validate:M,resetValidation:y,submit:p,reset:E,focus:R,getValidationComponents:()=>s}),()=>x("form",{class:"q-form",ref:i,onSubmit:p,onReset:E},X(t.default))}});const zt=!0,_t="vgc",Et=1;let G=null;const $e=()=>new Promise((e,t)=>{if(G!==null)return e(G);const o=indexedDB.open(_t,Et);o.onerror=r=>t(r),o.onupgradeneeded=r=>{o.result.createObjectStore("battles",{keyPath:"id"})},o.onsuccess=r=>{G=o.result,G.onerror=i=>{console.error("Database error:",i)},e(G)}});let W=null;const $t=async()=>{const r=(await $e()).transaction(["battles"],"readonly").objectStore("battles").getAll();return new Promise((i,m)=>{r.onerror=s=>m(s),r.onsuccess=()=>{W={};for(const s of r.result)W[s.id]=s;i(W)}})},Oe=async(e=!1)=>((e||W===null)&&(W=await $t()),W),Dt=async(e,t=!1)=>{const o=await Oe(t);return e in o?o[e]:null},Nt=async e=>{{const r=(await $e()).transaction(["battles"],"readwrite").objectStore("battles");return Promise.all(Object.values(e).map(i=>{const m=r.put(i);return new Promise((s,M)=>{m.onerror=y=>M(y),m.onsuccess=async()=>{const y=await Oe();y[i.id]=i,s(i)}})}))}};let ne=null;const Lt=async(e=!1)=>{if(e||ne===null){const t=localStorage.getItem("config");ne=t===null?{myUsernames:[]}:JSON.parse(t)}return ne},Ut=async e=>{localStorage.setItem("config",JSON.stringify(e)),ne=e};export{jt as Q,Tt as a,Lt as b,Ut as c,Dt as g,Nt as s,zt as u};
