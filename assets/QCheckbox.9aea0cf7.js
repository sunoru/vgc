import{V as me,o as V,n as ve,W as he,g as W,aM as F,r as w,v as ge,ai as be,h as r,aN as xe,aO as ke,aP as ye,a as f,a9 as we,S as U,c as J,w as A,aq as K,b as qe,aF as _e,Q as pe}from"./index.1a6d2e54.js";import{u as Ce,a as Te,b as Ee,c as Se,d as Pe,e as Be}from"./QItemSection.50c998f3.js";import{b as R,c as Fe,a as De}from"./focus-manager.387b0375.js";import{u as $e,a as Me,b as He}from"./use-checkbox.94ff15eb.js";function Ie(){let e;const o=W();function n(){e=void 0}return me(n),V(n),{removeTick:n,registerTick(s){e=s,ve(()=>{e===s&&(he(o)===!1&&e(),e=void 0)})}}}const D=[];function Ye(e,o){do{if(e.$options.name==="QMenu"){if(e.hide(o),e.$props.separateClosePopup===!0)return F(e)}else if(e.__qPortal===!0){const n=F(e);return n!==void 0&&n.$options.name==="QPopupProxy"?(e.hide(o),n):e}e=F(e)}while(e!=null)}function Oe(e){for(e=e.parent;e!=null;){if(e.type.name==="QGlobalDialog")return!0;if(e.type.name==="QDialog"||e.type.name==="QMenu")return!1;e=e.parent}return!1}function Qe(e,o,n,s){const i=w(!1),u=w(!1);let l=null;const c={},b=s===!0&&Oe(e);function d(v){if(v===!0){R(c),u.value=!0;return}u.value=!1,i.value===!1&&(b===!1&&l===null&&(l=ke()),i.value=!0,D.push(e.proxy),Fe(c))}function m(v){if(u.value=!1,v!==!0)return;R(c),i.value=!1;const k=D.indexOf(e.proxy);k!==-1&&D.splice(k,1),l!==null&&(ye(l),l=null)}return ge(()=>{m(!0)}),e.proxy.__qPortal=!0,be(e.proxy,"contentEl",()=>o.value),{showPortal:d,hidePortal:m,portalIsActive:i,portalIsAccessible:u,renderPortal:()=>b===!0?n():i.value===!0?[r(xe,{to:l},n())]:void 0}}const ze={transitionShow:{type:String,default:"fade"},transitionHide:{type:String,default:"fade"},transitionDuration:{type:[String,Number],default:300}};function Le(e,o=()=>{},n=()=>{}){return{transitionProps:f(()=>{const s=`q-transition--${e.transitionShow||o()}`,i=`q-transition--${e.transitionHide||n()}`;return{appear:!0,enterFromClass:`${s}-enter-from`,enterActiveClass:`${s}-enter-active`,enterToClass:`${s}-enter-to`,leaveFromClass:`${i}-leave-from`,leaveActiveClass:`${i}-leave-active`,leaveToClass:`${i}-leave-to`}}),transitionStyle:f(()=>`--q-transition-duration: ${e.transitionDuration}ms`)}}const h=[];let x;function Ae(e){x=e.keyCode===27}function Ke(){x===!0&&(x=!1)}function Re(e){x===!0&&(x=!1,we(e,27)===!0&&h[h.length-1](e))}function X(e){window[e]("keydown",Ae),window[e]("blur",Ke),window[e]("keyup",Re),x=!1}function je(e){U.is.desktop===!0&&(h.push(e),h.length===1&&X("addEventListener"))}function j(e){const o=h.indexOf(e);o>-1&&(h.splice(o,1),h.length===0&&X("removeEventListener"))}const g=[];function Y(e){g[g.length-1](e)}function Ge(e){U.is.desktop===!0&&(g.push(e),g.length===1&&document.body.addEventListener("focusin",Y))}function G(e){const o=g.indexOf(e);o>-1&&(g.splice(o,1),g.length===0&&document.body.removeEventListener("focusin",Y))}let p=0;const Ne={standard:"fixed-full flex-center",top:"fixed-top justify-center",bottom:"fixed-bottom justify-center",right:"fixed-right items-center",left:"fixed-left items-center"},N={standard:["scale","scale"],top:["slide-down","slide-up"],bottom:["slide-up","slide-down"],right:["slide-left","slide-right"],left:["slide-right","slide-left"]};var Ze=J({name:"QDialog",inheritAttrs:!1,props:{...Ce,...ze,transitionShow:String,transitionHide:String,persistent:Boolean,autoClose:Boolean,allowFocusOutside:Boolean,noEscDismiss:Boolean,noBackdropDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,noShake:Boolean,seamless:Boolean,maximized:Boolean,fullWidth:Boolean,fullHeight:Boolean,square:Boolean,position:{type:String,default:"standard",validator:e=>e==="standard"||["top","bottom","left","right"].includes(e)}},emits:[...Te,"shake","click","escapeKey"],setup(e,{slots:o,emit:n,attrs:s}){const i=W(),u=w(null),l=w(!1),c=w(!1);let b,d=null,m,v;const k=f(()=>e.persistent!==!0&&e.noRouteDismiss!==!0&&e.seamless!==!0),{preventBodyScroll:$}=Be(),{registerTimeout:M}=Ee(),{registerTick:Z,removeTick:H}=Ie(),{transitionProps:ee,transitionStyle:I}=Le(e,()=>N[e.position][0],()=>N[e.position][1]),{showPortal:O,hidePortal:Q,portalIsAccessible:te,renderPortal:ne}=Qe(i,u,fe,!0),{hide:q}=Se({showing:l,hideOnRouteChange:k,handleShow:ue,handleHide:re,processOnMount:!0}),{addToHistory:oe,removeFromHistory:ie}=Pe(l,q,k),ae=f(()=>`q-dialog__inner flex no-pointer-events q-dialog__inner--${e.maximized===!0?"maximized":"minimized"} q-dialog__inner--${e.position} ${Ne[e.position]}`+(c.value===!0?" q-dialog__inner--animating":"")+(e.fullWidth===!0?" q-dialog__inner--fullwidth":"")+(e.fullHeight===!0?" q-dialog__inner--fullheight":"")+(e.square===!0?" q-dialog__inner--square":"")),_=f(()=>l.value===!0&&e.seamless!==!0),se=f(()=>e.autoClose===!0?{onClick:ce}:{}),le=f(()=>[`q-dialog fullscreen no-pointer-events q-dialog--${_.value===!0?"modal":"seamless"}`,s.class]);A(()=>e.maximized,t=>{l.value===!0&&E(t)}),A(_,t=>{$(t),t===!0?(Ge(S),je(T)):(G(S),j(T))});function ue(t){oe(),d=e.noRefocus===!1&&document.activeElement!==null?document.activeElement:null,E(e.maximized),O(),c.value=!0,e.noFocus!==!0?(document.activeElement!==null&&document.activeElement.blur(),Z(y)):H(),M(()=>{if(i.proxy.$q.platform.is.ios===!0){if(e.seamless!==!0&&document.activeElement){const{top:a,bottom:P}=document.activeElement.getBoundingClientRect(),{innerHeight:L}=window,B=window.visualViewport!==void 0?window.visualViewport.height:L;a>0&&P>B/2&&(document.scrollingElement.scrollTop=Math.min(document.scrollingElement.scrollHeight-B,P>=L?1/0:Math.ceil(document.scrollingElement.scrollTop+P-B/2))),document.activeElement.scrollIntoView()}v=!0,u.value.click(),v=!1}O(!0),c.value=!1,n("show",t)},e.transitionDuration)}function re(t){H(),ie(),z(!0),c.value=!0,Q(),d!==null&&(((t&&t.type.indexOf("key")===0?d.closest('[tabindex]:not([tabindex^="-"])'):void 0)||d).focus(),d=null),M(()=>{Q(!0),c.value=!1,n("hide",t)},e.transitionDuration)}function y(t){De(()=>{let a=u.value;a===null||a.contains(document.activeElement)===!0||(a=(t!==""?a.querySelector(t):null)||a.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||a.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||a.querySelector("[autofocus], [data-autofocus]")||a,a.focus({preventScroll:!0}))})}function C(t){t&&typeof t.focus=="function"?t.focus({preventScroll:!0}):y(),n("shake");const a=u.value;a!==null&&(a.classList.remove("q-animate--scale"),a.classList.add("q-animate--scale"),clearTimeout(b),b=setTimeout(()=>{u.value!==null&&(a.classList.remove("q-animate--scale"),y())},170))}function T(){e.seamless!==!0&&(e.persistent===!0||e.noEscDismiss===!0?e.maximized!==!0&&e.noShake!==!0&&C():(n("escapeKey"),q()))}function z(t){clearTimeout(b),(t===!0||l.value===!0)&&(E(!1),e.seamless!==!0&&($(!1),G(S),j(T))),t!==!0&&(d=null)}function E(t){t===!0?m!==!0&&(p<1&&document.body.classList.add("q-body--dialog"),p++,m=!0):m===!0&&(p<2&&document.body.classList.remove("q-body--dialog"),p--,m=!1)}function ce(t){v!==!0&&(q(t),n("click",t))}function de(t){e.persistent!==!0&&e.noBackdropDismiss!==!0?q(t):e.noShake!==!0&&C(t.relatedTarget)}function S(t){e.allowFocusOutside!==!0&&te.value===!0&&_e(u.value,t.target)!==!0&&y('[tabindex]:not([tabindex="-1"])')}Object.assign(i.proxy,{focus:y,shake:C,__updateRefocusTarget(t){d=t||null}}),V(z);function fe(){return r("div",{role:"dialog","aria-modal":_.value===!0?"true":"false",...s,class:le.value},[r(K,{name:"q-transition--fade",appear:!0},()=>_.value===!0?r("div",{class:"q-dialog__backdrop fixed-full",style:I.value,"aria-hidden":"true",tabindex:-1,onFocusin:de}):null),r(K,ee.value,()=>l.value===!0?r("div",{ref:u,class:ae.value,style:I.value,tabindex:-1,...se.value},qe(o.default)):null)])}return ne}});const Ve=r("div",{key:"svg",class:"q-checkbox__bg absolute"},[r("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[r("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),r("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]);var et=J({name:"QCheckbox",props:$e,emits:Me,setup(e){function o(n,s){const i=f(()=>(n.value===!0?e.checkedIcon:s.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>i.value!==null?[r("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[r(pe,{class:"q-checkbox__icon",name:i.value})])]:[Ve]}return He("checkbox",o)}});export{Ze as Q,ze as a,Le as b,Qe as c,Ge as d,j as e,je as f,Ye as g,et as h,D as p,G as r,Ie as u};
